---
import { getCollection } from 'astro:content'
import BaseLayout from '../../layouts/BaseLayout.astro'
import { Image } from 'astro:assets'
import coverImage from '../../assets/contactImages/cover.jpg'
import { SocialLinks } from '../../consts'

// Obtiene la colecci√≥n
const contacts = await getCollection('contact')
const contact = contacts[0]

// Renderiza el contenido Markdown completo del primer contacto
const { Content } = await contact.render()
---

<BaseLayout title={contact.data.title}>
	<main class="app-container pt-36 max-w-3xl mx-auto text-center">
		<h1 class="text-5xl font-bold mb-8">{contact.data.title}</h1>

		<Image
			src={coverImage}
			alt="Contacto"
			width={400}
			height={300}
			loading="eager"
			class="rounded-4xl mb-12 mx-auto grayscale-75 saturate-200"
			style="object-fit: cover;"
		/>

		<!-- üëá Aqu√≠ renderiza el contenido completo del Markdown -->
		<article class="prose mx-auto text-left mb-16">
			<Content />
		</article>

		<!-- Contacto -->
		<div class="text-center space-y-4">
			<p>
				‚úâÔ∏è <a
					href={`mailto:${contact.data.email}`}
					class="text-primary underline"
				>
					{contact.data.email}
				</a>
			</p>

			<p>
				üì± <a
					href="https://wa.me/34611787267?text=Hola%2C%20necesito%20ayuda%20para%20gestionar%20una%20cita%20en%20Extranjer%C3%ADa."
					target="_blank"
					rel="noopener noreferrer"
					class="text-primary underline"
				>
					Contactar por WhatsApp: 611 787 267
				</a>
			</p>
		</div>

		<div class="text-center mt-8">
			<p class="font-semibold mb-2">Perfiles sociales:</p>
			<div class="flex justify-center gap-4 flex-wrap">
				{
					SocialLinks.map((link) => (
						<a
							href={link.url}
							target="_blank"
							rel="noopener noreferrer"
							class="text-primary underline"
						>
							{link.name}
						</a>
					))
				}
			</div>
		</div>
	</main>
</BaseLayout>
